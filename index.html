<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProteinPro Calculator | Optimize Your Protein Intake</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
            --success: #4cc9f0;
            --warning: #f9c74f;
            --danger: #f94144;
            --dark-bg: #121212;
            --dark-card: #1e1e1e;
            --dark-text: #e0e0e0;
            --light-bg: #f8f9fa;
            --light-card: #ffffff;
            --light-text: #333333;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            --transition: all 0.3s ease;
        }

        .dark-mode {
            --bg: var(--dark-bg);
            --card-bg: var(--dark-card);
            --text: var(--dark-text);
            --card-text: var(--dark-text);
            --input-bg: #2d2d2d;
            --border: #444;
        }

        .light-mode {
            --bg: var(--light-bg);
            --card-bg: var(--light-card);
            --text: var(--light-text);
            --card-text: var(--light-text);
            --input-bg: #fff;
            --border: #ddd;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: var(--transition);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header & Navigation */
        header {
            background-color: var(--card-bg);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--primary);
        }

        .nav-links {
            display: flex;
            gap: 25px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text);
            font-weight: 500;
            position: relative;
        }

        .nav-links a:after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 0;
            background-color: var(--primary);
            transition: var(--transition);
        }

        .nav-links a:hover:after {
            width: 100%;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--text);
            cursor: pointer;
            font-size: 1.2rem;
        }

        /* Hero Section */
        .hero {
            padding: 60px 0;
            text-align: center;
        }

        .hero h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 30px;
            color: var(--text);
        }

        /* Calculator Form */
        .calculator-form {
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 40px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background-color: var(--input-bg);
            color: var(--text);
            font-size: 1rem;
        }

        .btn {
            display: inline-block;
            padding: 12px 25px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: var(--transition);
        }

        .btn:hover {
            background-color: var(--secondary);
            transform: translateY(-2px);
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        /* Results Section */
        .results {
            display: none;
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 40px;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .results-title {
            font-size: 1.8rem;
            color: var(--primary);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .result-card {
            background: linear-gradient(145deg, var(--card-bg), var(--bg));
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow);
        }

        .result-card h3 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result-value {
            font-size: 2rem;
            font-weight: 700;
            margin: 10px 0;
            color: var(--accent);
        }

        /* Protein Sources */
        .protein-sources {
            margin: 40px 0;
        }

        .section-title {
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: var(--primary);
            text-align: center;
        }

        .sources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .source-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: var(--transition);
        }

        .source-card:hover {
            transform: translateY(-5px);
        }

        .source-header {
            padding: 20px;
            text-align: center;
            color: white;
        }

        .source-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .source-title {
            font-size: 1.4rem;
            margin-bottom: 5px;
        }

        .source-body {
            padding: 20px;
        }

        .source-amount {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 10px 0;
            color: var(--accent);
        }

        .source-desc {
            margin-top: 15px;
            font-size: 0.9rem;
            color: var(--text);
        }

        /* Carousel Navigation */
        .carousel-nav {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .carousel-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .carousel-btn:hover {
            background: var(--secondary);
        }

        /* Meal Planner */
        .meal-planner {
            margin: 40px 0;
        }

        .meals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .meal-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .meal-header {
            padding: 20px;
            text-align: center;
            color: white;
        }

        .meal-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .meal-title {
            font-size: 1.3rem;
            margin-bottom: 5px;
        }

        .meal-body {
            padding: 20px;
        }

        .meal-amount {
            font-size: 1.3rem;
            font-weight: 700;
            margin: 10px 0;
            color: var(--accent);
        }

        .meal-ingredients {
            margin-top: 15px;
        }

        .meal-ingredients li {
            padding: 5px 0;
            border-bottom: 1px solid var(--border);
        }

        .meal-ingredients li:last-child {
            border-bottom: none;
        }

        /* Charts */
        .chart-container {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            margin: 40px 0;
            box-shadow: var(--shadow);
        }

        /* Additional Sections */
        .additional-info {
            margin: 40px 0;
        }

        .info-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
        }

        .info-card h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .food-list {
            list-style-type: none;
        }

        .food-list li {
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }

        .food-list li:last-child {
            border-bottom: none;
        }

        /* Footer */
        footer {
            background-color: var(--card-bg);
            padding: 40px 0;
            margin-top: 60px;
            border-top: 1px solid var(--border);
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .developer {
            font-size: 0.9rem;
            color: var(--text);
        }

        /* Ad Placeholder */
        .ad-container {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 15px;
            margin: 30px 0;
            text-align: center;
            box-shadow: var(--shadow);
            display: none;
        }

        .ad-label {
            font-size: 0.8rem;
            color: var(--text);
            margin-bottom: 5px;
        }

        /* Loading Spinner */
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--card-bg);
            border-radius: 10px;
            z-index: 1000;
            box-shadow: var(--shadow);
        }

        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Toggle Switch */
        .toggle-container {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            justify-content: center;
        }

        .toggle-text {
            margin-right: 10px;
            font-weight: 500;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary);
        }

        input:checked + .slider:before {
            transform: translateX(30px);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }

            .results-grid, .sources-grid, .meals-grid {
                grid-template-columns: 1fr;
            }

            .footer-content {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .hero h1 {
                font-size: 2.2rem;
            }

            .results-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
        }

        /* Watermark for PDF */
        .watermark {
            position: absolute;
            opacity: 0.1;
            font-size: 50px;
            color: #000;
            transform: rotate(-45deg);
            pointer-events: none;
            z-index: 1000;
        }
    </style>
</head>
<body class="dark-mode">
    <header>
        <div class="container">
            <div class="navbar">
                <div class="logo">
                    <i class="fas fa-dumbbell"></i>
                    <span>ProteinPro</span>
                </div>
                <div class="nav-links">
<!--                    <a href="#">Home</a>-->
<!--                    <a href="#">Calculator</a>-->
<!--                    <a href="#">Resources</a>-->
<!--                    <a href="#">About</a>-->
                </div>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="container">
        <section class="hero">
            <h1>Protein Intake Calculator</h1>
            <p>Optimize your nutrition with our advanced protein calculator. Get personalized recommendations based on your body metrics and goals.</p>
        </section>

        <div class="ad-container" id="adContainer">
            <div class="ad-label">Advertisement</div>
            <!-- Ad content will be dynamically inserted -->
        </div>

        <section class="calculator-form">
            <h2>Personal Information</h2>
            <form id="proteinForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="gender">Gender</label>
                        <select class="form-control" id="gender" required>
                            <option value="">Select Gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="name">Full Name</label>
                        <input type="text" class="form-control" id="name" placeholder="Enter your name" required>
                    </div>
                    <div class="form-group">
                        <label for="dob">Date of Birth</label>
                        <input type="date" class="form-control" id="dob" required>
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="height">Height (cm)</label>
                        <input type="number" class="form-control" id="height" placeholder="Enter height in cm" required>
                    </div>
                    <div class="form-group">
                        <label for="weight">Weight (kg)</label>
                        <input type="number" class="form-control" id="weight" placeholder="Enter weight in kg" required>
                    </div>
                    <div class="form-group">
                        <label for="activity">Activity Level</label>
                        <select class="form-control" id="activity" required>
                            <option value="">Select Activity Level</option>
                            <option value="sedentary">Sedentary (little or no exercise)</option>
                            <option value="light">Lightly active (light exercise 1-3 days/week)</option>
                            <option value="moderate">Moderately active (moderate exercise 3-5 days/week)</option>
                            <option value="active">Active (hard exercise 6-7 days/week)</option>
                            <option value="veryActive">Very active (very hard exercise, physical job)</option>
                        </select>
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="workoutWeight">Workout Weight (kg)</label>
                        <input type="number" class="form-control" id="workoutWeight" placeholder="Max weight you lift (optional)">
                        <small>Enter the maximum weight you use for your main exercises (e.g. bench press, squats)</small>
                    </div>
                    <div class="form-group">
                        <label for="goal">Fitness Goal</label>
                        <select class="form-control" id="goal">
                            <option value="maintain">Maintain Weight</option>
                            <option value="lose">Lose Weight</option>
                            <option value="gain">Gain Muscle</option>
                        </select>
                    </div>
                </div>

                <button type="submit" class="btn btn-block">Calculate Protein Needs</button>
            </form>
        </section>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Generating your protein plan...</p>
        </div>

        <section class="results" id="resultsSection">
            <div class="results-header">
                <h2 class="results-title">Your Protein Analysis</h2>
                <button class="btn" id="downloadPdf">
                    <i class="fas fa-download"></i> Download Report
                </button>
            </div>

            <div class="results-grid">
                <div class="result-card">
                    <h3><i class="fas fa-user"></i> Personal Info</h3>
                    <p><strong>Name:</strong> <span id="resultName"></span></p>
                    <p><strong>Age:</strong> <span id="resultAge"></span> years</p>
                    <p><strong>BMI:</strong> <span id="resultBmi"></span></p>
                    <p><strong>Category:</strong> <span id="resultBmiCategory"></span></p>
                </div>
                <div class="result-card">
                    <h3><i class="fas fa-calculator"></i> Protein Requirements</h3>
                    <div class="result-value" id="resultProtein"></div>
                    <p>grams of protein per day</p>
                    <p>Based on your body metrics and activity level</p>
                </div>
                <div class="result-card">
                    <h3><i class="fas fa-chart-line"></i> BMI Analysis</h3>
                    <canvas id="bmiChart" height="150"></canvas>
                </div>
            </div>

            <div class="protein-sources">
                <h2 class="section-title">Protein Source Breakdown</h2>

                <div class="toggle-container">
                    <span class="toggle-text">Show only one source:</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="singleSourceToggle">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="carousel-nav" id="carouselNav" style="display: none;">
                    <button class="carousel-btn" id="prevBtn"><i class="fas fa-chevron-left"></i></button>
                    <span id="carouselStatus">1/5</span>
                    <button class="carousel-btn" id="nextBtn"><i class="fas fa-chevron-right"></i></button>
                </div>

                <div class="sources-grid">
                    <div class="source-card only-source" data-color="#FF9F1C" id="eggSource">
                        <div class="source-header" style="background-color: #FF9F1C;">
                            <div class="source-icon">ü•ö</div>
                            <h3 class="source-title">Eggs Only</h3>
                        </div>
                        <div class="source-body">
                            <p><strong>Amount needed per day:</strong></p>
                            <div class="source-amount" id="eggsOnlyAmount"></div>
                            <p class="source-desc">Eggs are a complete protein source containing all 9 essential amino acids. They're rich in vitamins B2, B12, D, and minerals like selenium and iodine. The bioavailability of egg protein is highest among all food sources.</p>
                            <p><strong>Alternative sources:</strong> Greek yogurt, cottage cheese, tofu</p>
                        </div>
                    </div>
                    <div class="source-card only-source" data-color="#E71D36" id="meatSource" style="display: none;">
                        <div class="source-header" style="background-color: #E71D36;">
                            <div class="source-icon">üçó</div>
                            <h3 class="source-title">Meat Only</h3>
                        </div>
                        <div class="source-body">
                            <p><strong>Amount needed per day:</strong></p>
                            <div class="source-amount" id="meatOnlyAmount"></div>
                            <p class="source-desc">Meat provides high-quality protein with excellent amino acid profile. It's rich in creatine, carnosine, vitamin B12, and highly bioavailable iron. Lean meats like chicken breast and turkey are optimal for muscle building with minimal fat.</p>
                            <p><strong>Alternative sources:</strong> Fish, turkey, lean beef, pork tenderloin</p>
                        </div>
                    </div>
                    <div class="source-card only-source" data-color="#2EC4B6" id="seedsSource" style="display: none;">
                        <div class="source-header" style="background-color: #2EC4B6;">
                            <div class="source-icon">üå∞</div>
                            <h3 class="source-title">Seeds & Nuts Only</h3>
                        </div>
                        <div class="source-body">
                            <p><strong>Amount needed per day:</strong></p>
                            <div class="source-amount" id="seedsOnlyAmount"></div>
                            <p class="source-desc">Seeds and nuts provide protein along with healthy fats, fiber, and antioxidants. They're rich in magnesium, vitamin E, and various phytochemicals. Pumpkin seeds (30g protein/100g) and almonds (21g protein/100g) are among the best sources.</p>
                            <p><strong>Alternative sources:</strong> Lentils, chickpeas, quinoa, beans</p>
                        </div>
                    </div>
                    <div class="source-card only-source" data-color="#6A4C93" id="powderSource" style="display: none;">
                        <div class="source-header" style="background-color: #6A4C93;">
                            <div class="source-icon">ü•§</div>
                            <h3 class="source-title">Protein Powder Only</h3>
                        </div>
                        <div class="source-body">
                            <p><strong>Amount needed per day:</strong></p>
                            <div class="source-amount" id="powderOnlyAmount"></div>
                            <p class="source-desc">Protein powders offer concentrated, fast-absorbing protein. Whey protein is particularly effective for muscle building due to its rapid digestion and high leucine content. Look for products with minimal additives and third-party testing for purity.</p>
                            <p><strong>Alternative sources:</strong> Collagen peptides, hemp protein, soy protein isolate</p>
                        </div>
                    </div>
                    <div class="source-card only-source" data-color="#4CC9F0" id="smoothieSource" style="display: none;">
                        <div class="source-header" style="background-color: #4CC9F0;">
                            <div class="source-icon">ü•§</div>
                            <h3 class="source-title">Smoothie Only</h3>
                        </div>
                        <div class="source-body">
                            <p><strong>Recommended smoothie ingredients:</strong></p>
                            <div class="source-amount" id="smoothieAmount"></div>
                            <p class="source-desc">Protein smoothies are an excellent way to meet your protein needs while also getting other essential nutrients. They're easily digestible and can be customized based on your preferences and goals.</p>
                            <p><strong>Sample recipe:</strong> 1 scoop protein powder, 1 cup Greek yogurt, 1 tbsp almond butter, 1/2 banana, 1 cup spinach, 1 cup almond milk</p>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3><i class="fas fa-utensils"></i> Complete Protein Plan (All Sources)</h3>
                    <p>For optimal nutrition, combine these protein sources throughout your day:</p>
                    <ul class="food-list">
                        <li><strong>Eggs:</strong> <span id="completeEggs"></span> (approx <span id="completeEggsGrams"></span>g protein)</li>
                        <li><strong>Meat/Fish:</strong> <span id="completeMeat"></span> (approx <span id="completeMeatGrams"></span>g protein)</li>
                        <li><strong>Seeds/Nuts:</strong> <span id="completeSeeds"></span> (approx <span id="completeSeedsGrams"></span>g protein)</li>
                        <li><strong>Protein Powder:</strong> <span id="completePowder"></span> (approx <span id="completePowderGrams"></span>g protein)</li>
                        <li><strong>Dairy/Legumes:</strong> <span id="completeOther"></span> (approx <span id="completeOtherGrams"></span>g protein)</li>
                    </ul>
                </div>
            </div>

            <div class="chart-container">
                <h2 class="section-title">Protein Distribution</h2>
                <canvas id="proteinChart" height="250"></canvas>
            </div>

            <!-- Meal Planner Section -->
            <div class="meal-planner">
                <h2 class="section-title">Daily Meal Planner</h2>
                <p class="text-center">Here's a breakdown of how to distribute your protein intake throughout the day:</p>

                <div class="meals-grid">
                    <div class="meal-card">
                        <div class="meal-header" style="background-color: #4361ee;">
                            <div class="meal-icon">üç≥</div>
                            <h3 class="meal-title">Breakfast</h3>
                        </div>
                        <div class="meal-body">
                            <div class="meal-amount" id="breakfastAmount">0g protein</div>
                            <p>Recommended options:</p>
                            <ul class="meal-ingredients">
                                <li id="breakfastOption1">2 eggs + 1 slice whole grain toast</li>
                                <li id="breakfastOption2">Greek yogurt with nuts and berries</li>
                                <li id="breakfastOption3">Protein smoothie with spinach</li>
                            </ul>
                        </div>
                    </div>

                    <div class="meal-card">
                        <div class="meal-header" style="background-color: #3a0ca3;">
                            <div class="meal-icon">üç≤</div>
                            <h3 class="meal-title">Lunch</h3>
                        </div>
                        <div class="meal-body">
                            <div class="meal-amount" id="lunchAmount">0g protein</div>
                            <p>Recommended options:</p>
                            <ul class="meal-ingredients">
                                <li id="lunchOption1">Grilled chicken salad with quinoa</li>
                                <li id="lunchOption2">Lentil soup with whole grain bread</li>
                                <li id="lunchOption3">Tofu stir-fry with vegetables</li>
                            </ul>
                        </div>
                    </div>

                    <div class="meal-card">
                        <div class="meal-header" style="background-color: #f72585;">
                            <div class="meal-icon">üçΩÔ∏è</div>
                            <h3 class="meal-title">Dinner</h3>
                        </div>
                        <div class="meal-body">
                            <div class="meal-amount" id="dinnerAmount">0g protein</div>
                            <p>Recommended options:</p>
                            <ul class="meal-ingredients">
                                <li id="dinnerOption1">Baked salmon with sweet potato</li>
                                <li id="dinnerOption2">Lean beef with roasted vegetables</li>
                                <li id="dinnerOption3">Chickpea curry with brown rice</li>
                            </ul>
                        </div>
                    </div>

                    <div class="meal-card">
                        <div class="meal-header" style="background-color: #4cc9f0;">
                            <div class="meal-icon">ü•ú</div>
                            <h3 class="meal-title">Snacks</h3>
                        </div>
                        <div class="meal-body">
                            <div class="meal-amount" id="snacksAmount">0g protein</div>
                            <p>Recommended options:</p>
                            <ul class="meal-ingredients">
                                <li id="snacksOption1">Handful of almonds or mixed nuts</li>
                                <li id="snacksOption2">Greek yogurt or cottage cheese</li>
                                <li id="snacksOption3">Protein bar or shake</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="additional-info">
                <div class="info-card">
                    <h3><i class="fas fa-exclamation-triangle"></i> Symptoms of Protein Deficiency</h3>
                    <p>If you're not getting enough protein, you might experience these symptoms:</p>
                    <ul class="food-list">
                        <li><strong>Constant hunger:</strong> despite eating enough calories</li>
                        <li><strong>Slow recovery from injuries:</strong> protein is essential for tissue repair</li>
                        <li><strong>Muscle weakness:</strong> and gradual loss of muscle mass</li>
                        <li><strong>Fatigue:</strong> and lack of energy throughout the day</li>
                        <li><strong>Hair, skin, and nail problems:</strong> thinning hair, dry skin, and brittle nails</li>
                        <li><strong>Frequent illnesses:</strong> due to weakened immune system</li>
                        <li><strong>Swelling (edema):</strong> especially in legs, feet, and hands</li>
                        <li><strong>Brain fog:</strong> difficulty concentrating and mental fatigue</li>
                    </ul>
                </div>

                <div class="info-card">
                    <h3><i class="fas fa-times-circle"></i> Foods to Avoid for Better Digestion</h3>
                    <p>To minimize gas, bloating, and maintain stomach hygiene, limit these foods:</p>
                    <ul class="food-list">
                        <li><strong>Processed meats:</strong> High in sodium, preservatives, and saturated fats</li>
                        <li><strong>Cruciferous vegetables:</strong> Broccoli, cauliflower, cabbage (can cause gas)</li>
                        <li><strong>Beans and lentils:</strong> Soak before cooking and start with small portions</li>
                        <li><strong>Dairy products:</strong> If lactose intolerant, try lactose-free alternatives</li>
                        <li><strong>Artificial sweeteners:</strong> Sorbitol, mannitol, and xylitol can cause bloating</li>
                        <li><strong>Carbonated drinks:</strong> Can introduce excess gas into your digestive system</li>
                        <li><strong>Fried foods:</strong> High in fat and can delay stomach emptying</li>
                    </ul>
                </div>

                <div class="info-card">
                    <h3><i class="fas fa-check-circle"></i> Protein Powder Guidelines</h3>
                    <p>When selecting protein powder, look for:</p>
                    <ul class="food-list">
                        <li><strong>High protein content:</strong> At least 20-25g per serving</li>
                        <li><strong>Low sugar:</strong> Less than 5g per serving</li>
                        <li><strong>Complete amino acid profile:</strong> Especially leucine content (2-3g per serving)</li>
                        <li><strong>Third-party testing:</strong> For heavy metals and purity verification</li>
                        <li><strong>Minimal additives:</strong> Avoid artificial sweeteners and excessive fillers</li>
                    </ul>
                    <p>Ideal types: Whey isolate, casein, pea protein, or brown rice protein blends</p>
                </div>

                <div class="info-card">
                    <h3><i class="fas fa-blender"></i> Smoothie Recommendations</h3>
                    <p>Based on your goals, here are customized smoothie ideas:</p>
                    <ul class="food-list">
                        <li><strong>Muscle Gain:</strong> Whey protein, banana, peanut butter, oats, milk</li>
                        <li><strong>Weight Loss:</strong> Plant-based protein, berries, spinach, almond milk, chia seeds</li>
                        <li><strong>Energy Boost:</strong> Greek yogurt, mango, spinach, flax seeds, coconut water</li>
                        <li><strong>Digestive Health:</strong> Kefir, banana, ginger, spinach, almond butter</li>
                    </ul>
                    <p>Always include a protein source, healthy fat, fiber, and liquid in your smoothies for balanced nutrition.</p>
                </div>
            </div>
        </section>

        <div class="ad-container" id="adContainer2">
            <div class="ad-label">Advertisement</div>
            <!-- Ad content will be dynamically inserted -->
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="copyright">¬© 2025 ProteinPro Calculator. All rights reserved.</div>
                <div class="developer">Designed and developed by vishnu webz</div>
            </div>
        </div>
    </footer>

    <script>
        // Initialize
        const { jsPDF } = window.jspdf;

        // Theme Toggling
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;

        themeToggle.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            body.classList.toggle('light-mode');

            if (body.classList.contains('dark-mode')) {
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            } else {
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            }
        });

        // Single Source Toggle and Carousel
        const singleSourceToggle = document.getElementById('singleSourceToggle');
        const carouselNav = document.getElementById('carouselNav');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const carouselStatus = document.getElementById('carouselStatus');
        const sourceCards = document.querySelectorAll('.only-source');

        let currentSourceIndex = 0;

        singleSourceToggle.addEventListener('change', function() {
            if (this.checked) {
                carouselNav.style.display = 'flex';
                sourceCards.forEach((card, index) => {
                    card.style.display = index === 0 ? 'block' : 'none';
                });
                updateCarouselStatus();
            } else {
                carouselNav.style.display = 'none';
                sourceCards.forEach(card => {
                    card.style.display = 'block';
                });
            }
        });

        prevBtn.addEventListener('click', () => {
            currentSourceIndex = (currentSourceIndex - 1 + sourceCards.length) % sourceCards.length;
            sourceCards.forEach((card, index) => {
                card.style.display = index === currentSourceIndex ? 'block' : 'none';
            });
            updateCarouselStatus();
        });

        nextBtn.addEventListener('click', () => {
            currentSourceIndex = (currentSourceIndex + 1) % sourceCards.length;
            sourceCards.forEach((card, index) => {
                card.style.display = index === currentSourceIndex ? 'block' : 'none';
            });
            updateCarouselStatus();
        });

        function updateCarouselStatus() {
            carouselStatus.textContent = `${currentSourceIndex + 1}/${sourceCards.length}`;
        }

        // Form Submission
        document.getElementById('proteinForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // Show loading
            document.getElementById('loading').style.display = 'block';
            document.getElementById('resultsSection').style.display = 'none';

            setTimeout(() => {
                // Get form values
                const name = document.getElementById('name').value;
                const dob = new Date(document.getElementById('dob').value);
                const height = parseFloat(document.getElementById('height').value);
                const weight = parseFloat(document.getElementById('weight').value);
                const activity = document.getElementById('activity').value;
                const workoutWeight = parseFloat(document.getElementById('workoutWeight').value) || 0;
                const goal = document.getElementById('goal').value;

                // Calculate age
                const today = new Date();
                let age = today.getFullYear() - dob.getFullYear();
                const monthDiff = today.getMonth() - dob.getMonth();
                if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
                    age--;
                }

                // Calculate BMI
                const heightInMeters = height / 100;
                const bmi = weight / (heightInMeters * heightInMeters);

                // Determine BMI category
                let bmiCategory;
                if (bmi < 18.5) bmiCategory = "Underweight";
                else if (bmi < 25) bmiCategory = "Normal weight";
                else if (bmi < 30) bmiCategory = "Overweight";
                else bmiCategory = "Obese";

                // Calculate protein needs based on activity and workout weight
                let proteinMultiplier;
                switch(activity) {
                    case 'sedentary': proteinMultiplier = 0.8; break;
                    case 'light': proteinMultiplier = 1.0; break;
                    case 'moderate': proteinMultiplier = 1.2; break;
                    case 'active': proteinMultiplier = 1.5; break;
                    case 'veryActive': proteinMultiplier = 1.8; break;
                    default: proteinMultiplier = 0.8;
                }

                // Adjust based on workout weight (if provided)
                let workoutAdjustment = 0;
                if (workoutWeight > 0) {
                    workoutAdjustment = workoutWeight * 0.02; // 0.02g per kg lifted
                }

                // Adjust based on goal
                let goalAdjustment = 0;
                if (goal === 'lose') goalAdjustment = -0.2;
                if (goal === 'gain') goalAdjustment = 0.2;

                const proteinNeeds = Math.round(weight * (proteinMultiplier + goalAdjustment) + workoutAdjustment);

                // Update results
                document.getElementById('resultName').textContent = name;
                document.getElementById('resultAge').textContent = age;
                document.getElementById('resultBmi').textContent = bmi.toFixed(1);
                document.getElementById('resultBmiCategory').textContent = bmiCategory;
                document.getElementById('resultProtein').textContent = proteinNeeds;

                // Calculate protein source amounts (only one source)
                document.getElementById('eggsOnlyAmount').textContent = Math.round(proteinNeeds / 6) + " eggs (6g protein each)";
                document.getElementById('meatOnlyAmount').textContent = Math.round(proteinNeeds / 25 * 100) + "g meat (25g protein per 100g)";
                document.getElementById('seedsOnlyAmount').textContent = Math.round(proteinNeeds / 20 * 100) + "g mixed nuts (20g protein per 100g)";
                document.getElementById('powderOnlyAmount').textContent = Math.round(proteinNeeds / 24) + " scoops (24g protein per scoop)";
                document.getElementById('smoothieAmount').textContent = Math.round(proteinNeeds / 24) + " scoops protein powder + other ingredients";

                // Calculate complete protein plan (all sources)
                const eggsCount = Math.round(proteinNeeds * 0.2 / 6);
                document.getElementById('completeEggs').textContent = eggsCount + " eggs";
                document.getElementById('completeEggsGrams').textContent = eggsCount * 6;

                const meatGrams = Math.round(proteinNeeds * 0.3 / 25 * 100);
                document.getElementById('completeMeat').textContent = meatGrams + "g chicken/fish";
                document.getElementById('completeMeatGrams').textContent = Math.round(meatGrams * 0.25);

                const seedsGrams = Math.round(proteinNeeds * 0.1 / 20 * 100);
                document.getElementById('completeSeeds').textContent = seedsGrams + "g nuts/seeds";
                document.getElementById('completeSeedsGrams').textContent = Math.round(seedsGrams * 0.2);

                const powderScoops = Math.round(proteinNeeds * 0.2 / 24);
                document.getElementById('completePowder').textContent = powderScoops + " scoops";
                document.getElementById('completePowderGrams').textContent = powderScoops * 24;

                const otherGrams = Math.round(proteinNeeds * 0.2);
                document.getElementById('completeOther').textContent = otherGrams + "g dairy/legumes";
                document.getElementById('completeOtherGrams').textContent = otherGrams;

                // Update meal planner
                const breakfastAmount = Math.round(proteinNeeds * 0.25);
                const lunchAmount = Math.round(proteinNeeds * 0.35);
                const dinnerAmount = Math.round(proteinNeeds * 0.30);
                const snacksAmount = Math.round(proteinNeeds * 0.10);

                document.getElementById('breakfastAmount').textContent = `${breakfastAmount}g protein`;
                document.getElementById('lunchAmount').textContent = `${lunchAmount}g protein`;
                document.getElementById('dinnerAmount').textContent = `${dinnerAmount}g protein`;
                document.getElementById('snacksAmount').textContent = `${snacksAmount}g protein`;

                // Update meal options based on goals
                updateMealOptions(goal, breakfastAmount, lunchAmount, dinnerAmount, snacksAmount);

                // Create BMI chart
                createBmiChart(bmi, bmiCategory);

                // Create protein distribution chart
                createProteinChart(proteinNeeds);

                // Hide loading and show results
                document.getElementById('loading').style.display = 'none';
                document.getElementById('resultsSection').style.display = 'block';

                // Scroll to results
                document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
            }, 1500);
        });

        // Update meal options based on goals
        function updateMealOptions(goal, breakfastAmount, lunchAmount, dinnerAmount, snacksAmount) {
            if (goal === 'lose') {
                document.getElementById('breakfastOption1').textContent = `2 eggs + 1 slice whole grain toast (${Math.round(breakfastAmount*0.8)}g protein)`;
                document.getElementById('breakfastOption2').textContent = `Greek yogurt with nuts and berries (${Math.round(breakfastAmount*0.7)}g protein)`;
                document.getElementById('breakfastOption3').textContent = `Protein smoothie with spinach (${Math.round(breakfastAmount*0.9)}g protein)`;

                document.getElementById('lunchOption1').textContent = `Grilled chicken salad with quinoa (${Math.round(lunchAmount*0.9)}g protein)`;
                document.getElementById('lunchOption2').textContent = `Lentil soup with whole grain bread (${Math.round(lunchAmount*0.8)}g protein)`;
                document.getElementById('lunchOption3').textContent = `Tofu stir-fry with vegetables (${Math.round(lunchAmount*0.7)}g protein)`;

                document.getElementById('dinnerOption1').textContent = `Baked salmon with sweet potato (${Math.round(dinnerAmount*0.9)}g protein)`;
                document.getElementById('dinnerOption2').textContent = `Lean beef with roasted vegetables (${Math.round(dinnerAmount*0.8)}g protein)`;
                document.getElementById('dinnerOption3').textContent = `Chickpea curry with brown rice (${Math.round(dinnerAmount*0.7)}g protein)`;

                document.getElementById('snacksOption1').textContent = `Handful of almonds or mixed nuts (${Math.round(snacksAmount*0.9)}g protein)`;
                document.getElementById('snacksOption2').textContent = `Greek yogurt or cottage cheese (${Math.round(snacksAmount*0.8)}g protein)`;
                document.getElementById('snacksOption3').textContent = `Protein bar or shake (${Math.round(snacksAmount*0.7)}g protein)`;
            } else if (goal === 'gain') {
                document.getElementById('breakfastOption1').textContent = `3 eggs + 2 slices whole grain toast (${Math.round(breakfastAmount*1.1)}g protein)`;
                document.getElementById('breakfastOption2').textContent = `Greek yogurt with nuts, seeds and berries (${Math.round(breakfastAmount*1.2)}g protein)`;
                document.getElementById('breakfastOption3').textContent = `Protein smoothie with oats and peanut butter (${Math.round(breakfastAmount*1.3)}g protein)`;

                document.getElementById('lunchOption1').textContent = `Grilled chicken with quinoa and vegetables (${Math.round(lunchAmount*1.1)}g protein)`;
                document.getElementById('lunchOption2').textContent = `Lentil and chicken soup with whole grain bread (${Math.round(lunchAmount*1.2)}g protein)`;
                document.getElementById('lunchOption3').textContent = `Tofu and chickpea stir-fry with vegetables (${Math.round(lunchAmount*1.1)}g protein)`;

                document.getElementById('dinnerOption1').textContent = `Baked salmon with sweet potato and greens (${Math.round(dinnerAmount*1.1)}g protein)`;
                document.getElementById('dinnerOption2').textContent = `Lean beef with roasted vegetables and quinoa (${Math.round(dinnerAmount*1.2)}g protein)`;
                document.getElementById('dinnerOption3').textContent = `Chickpea and chicken curry with brown rice (${Math.round(dinnerAmount*1.1)}g protein)`;

                document.getElementById('snacksOption1').textContent = `Mixed nuts and seeds (${Math.round(snacksAmount*1.1)}g protein)`;
                document.getElementById('snacksOption2').textContent = `Greek yogurt with protein granola (${Math.round(snacksAmount*1.2)}g protein)`;
                document.getElementById('snacksOption3').textContent = `Protein shake with banana (${Math.round(snacksAmount*1.3)}g protein)`;
            } else {
                document.getElementById('breakfastOption1').textContent = `2 eggs + 1 slice whole grain toast (${Math.round(breakfastAmount*0.9)}g protein)`;
                document.getElementById('breakfastOption2').textContent = `Greek yogurt with nuts and berries (${Math.round(breakfastAmount*0.8)}g protein)`;
                document.getElementById('breakfastOption3').textContent = `Protein smoothie with spinach (${Math.round(breakfastAmount*1.0)}g protein)`;

                document.getElementById('lunchOption1').textContent = `Grilled chicken salad with quinoa (${Math.round(lunchAmount*1.0)}g protein)`;
                document.getElementById('lunchOption2').textContent = `Lentil soup with whole grain bread (${Math.round(lunchAmount*0.9)}g protein)`;
                document.getElementById('lunchOption3').textContent = `Tofu stir-fry with vegetables (${Math.round(lunchAmount*0.8)}g protein)`;

                document.getElementById('dinnerOption1').textContent = `Baked salmon with sweet potato (${Math.round(dinnerAmount*1.0)}g protein)`;
                document.getElementById('dinnerOption2').textContent = `Lean beef with roasted vegetables (${Math.round(dinnerAmount*0.9)}g protein)`;
                document.getElementById('dinnerOption3').textContent = `Chickpea curry with brown rice (${Math.round(dinnerAmount*0.8)}g protein)`;

                document.getElementById('snacksOption1').textContent = `Handful of almonds or mixed nuts (${Math.round(snacksAmount*1.0)}g protein)`;
                document.getElementById('snacksOption2').textContent = `Greek yogurt or cottage cheese (${Math.round(snacksAmount*0.9)}g protein)`;
                document.getElementById('snacksOption3').textContent = `Protein bar or shake (${Math.round(snacksAmount*1.1)}g protein)`;
            }
        }

        // Create BMI Chart
        function createBmiChart(bmi, category) {
            const ctx = document.getElementById('bmiChart').getContext('2d');

            // Define ranges
            const underweight = 18.5;
            const normal = 25;
            const overweight = 30;

            // Create dataset
            const data = {
                labels: ['Underweight', 'Normal', 'Overweight', 'Obese'],
                datasets: [{
                    label: 'BMI Range',
                    data: [underweight, normal - underweight, overweight - normal, 10],
                    backgroundColor: [
                        '#FF9F1C',
                        '#2EC4B6',
                        '#E71D36',
                        '#6A4C93'
                    ],
                    borderWidth: 0
                }]
            };

            // Create chart
            new Chart(ctx, {
                type: 'doughnut',
                data: data,
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.dataIndex === 0) {
                                        label += '<18.5';
                                    } else if (context.dataIndex === 1) {
                                        label += '18.5-24.9';
                                    } else if (context.dataIndex === 2) {
                                        label += '25-29.9';
                                    } else {
                                        label += '30+';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Create Protein Distribution Chart
        function createProteinChart(proteinNeeds) {
            const ctx = document.getElementById('proteinChart').getContext('2d');

            const breakfast = Math.round(proteinNeeds * 0.25);
            const lunch = Math.round(proteinNeeds * 0.35);
            const dinner = Math.round(proteinNeeds * 0.30);
            const snacks = Math.round(proteinNeeds * 0.10);

            // Create dataset
            const data = {
                labels: ['Breakfast', 'Lunch', 'Dinner', 'Snacks'],
                datasets: [{
                    label: 'Protein Distribution (grams)',
                    data: [breakfast, lunch, dinner, snacks],
                    backgroundColor: [
                        'rgba(67, 97, 238, 0.7)',
                        'rgba(58, 12, 163, 0.7)',
                        'rgba(247, 37, 133, 0.7)',
                        'rgba(76, 201, 240, 0.7)'
                    ],
                    borderColor: [
                        'rgb(67, 97, 238)',
                        'rgb(58, 12, 163)',
                        'rgb(247, 37, 133)',
                        'rgb(76, 201, 240)'
                    ],
                    borderWidth: 1
                }]
            };

            // Create chart
            new Chart(ctx, {
                type: 'bar',
                data: data,
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw}g`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Grams of Protein'
                            }
                        }
                    }
                }
            });
        }

        // ======== Real PDF Download (with watermark) ========
        document.getElementById("downloadPdf").addEventListener("click", async function () {
            const results = document.getElementById("resultsSection");
            if (results.style.display === "none" || results.style.display === "") {
                alert("Please calculate your plan first.");
                return;
            }

            // Show loading state
            document.getElementById("loading").style.display = "block";

            try {
                // Render section to canvas
                const canvas = await html2canvas(results, { scale: 2, backgroundColor: null });
                const imgData = canvas.toDataURL("image/png");

                // Page size: A4 portrait
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF({ unit: "pt", format: "a4", compress: true });
                const pageWidth = pdf.internal.pageSize.getWidth();
                const pageHeight = pdf.internal.pageSize.getHeight();

                // Scale image to fit width
                const imgWidth = pageWidth - 60; // 30pt margin each side
                const imgHeight = (canvas.height * imgWidth) / canvas.width;

                // If content taller than one page, slice it into multiple pages
                let position = 30; // top margin
                let remainingHeight = imgHeight;

                const pageCanvas = document.createElement("canvas");
                const pageCtx = pageCanvas.getContext("2d");
                const ratio = imgWidth / canvas.width; // scale ratio we use
                const sliceHeight = Math.floor(pageHeight / ratio) - 60 / ratio; // account for margins

                let pageIndex = 0;
                while (remainingHeight > 0) {
                    const sY = pageIndex * sliceHeight; // source y
                    const sHeight = Math.min(sliceHeight, canvas.height - sY);

                    pageCanvas.width = canvas.width;
                    pageCanvas.height = sHeight;
                    pageCtx.clearRect(0, 0, pageCanvas.width, pageCanvas.height);
                    pageCtx.drawImage(canvas, 0, sY, canvas.width, sHeight, 0, 0, canvas.width, sHeight);

                    const pageImgData = pageCanvas.toDataURL("image/png");

                    if (pageIndex > 0) pdf.addPage();
                    pdf.addImage(pageImgData, "PNG", 30, 30, imgWidth, sHeight * ratio, undefined, "FAST");

                    // Watermark on each page
                    addWatermark(pdf);

                    remainingHeight -= pageHeight;
                    pageIndex++;
                }

                // File name uses name + date if available
                const userName = (document.getElementById("resultName").textContent || "user").replace(/\s+/g, "_");
                const dt = new Date();
                const y = dt.getFullYear();
                const m = String(dt.getMonth() + 1).padStart(2, "0");
                const d = String(dt.getDate()).padStart(2, "0");
                pdf.save(`ProteinPro_${userName}_${y}-${m}-${d}.pdf`);
            } catch (err) {
                console.error("PDF generation failed:", err);
                alert("Sorry, couldn't generate the PDF. Check console for details.");
            } finally {
                document.getElementById("loading").style.display = "none";
            }
        });

        function addWatermark(pdf) {
            const w = pdf.internal.pageSize.getWidth();
            const h = pdf.internal.pageSize.getHeight();
            pdf.setGState(new pdf.GState({ opacity: 0.08 }));
            pdf.setTextColor(50);
            pdf.setFontSize(48);
            pdf.saveGraphicsState();
            pdf.text("Designed by vishnu webz", w / 2, h / 2, {
                angle: -30,
                align: "center",
            });
            pdf.restoreGraphicsState();
            pdf.setGState(new pdf.GState({ opacity: 1 }));
        }

        // Simulate ad display (in a real implementation, this would be AdSense code)
        setTimeout(() => {
            document.getElementById('adContainer').style.display = 'block';
            document.getElementById('adContainer2').style.display = 'block';
        }, 2000);
    </script>
</body>
</html>